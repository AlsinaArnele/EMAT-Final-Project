<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emat | Home</title>
    <link rel="stylesheet" href="css/homepage.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- leaflet routing machine plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-routing-machine/3.2.12/leaflet-routing-machine.js"></script>
</head>
<body>
    <nav>
        <p onclick="changeTabs('home')" id="homeicon"><span class="material-symbols-outlined">home</span></p>
        <p onclick="changeTabs('profile')" id="profileicon"><span class="material-symbols-outlined">person</span></p>
        <p onclick="changeTabs('history')" id="historyicon"><span class="material-symbols-outlined">history</span></p>
        <p onclick="changeTabs('report')" id="reporticon"><span class="material-symbols-outlined">flag</span></p>
        <p onclick="changeTabs('settings')" id="settingsicon"><span class="material-symbols-outlined">logout</span></p>
    </nav>

    <!-- TABS -->
    <form id="home" class="home">
        <h1>Make a booking</h1>
        <select name="route" id="route" selected="default">
            <option value="default-route">Choose Route</option>
            <option value="Rongai">Rongai</option>
            <option value="CBD">Downtown</option>
            <option value="Karen">Karen</option>
            <option value="Ngong">Ngong'</option>
        </select>
        <select name="time" id="time" selected="default">
        <option value="default-time">Choose Time</option>
            <option value="11">11.30 am</option>
            <option value="2">2.30 pm</option>
            <option value="5">5.30 pm</option>
        </select> 
        <h2>Vehicle Details</h1>
        <input type="text" name="make" id="make" readonly value="Scania">
        <input type="text" name="model" id="model" readonly value="F250">
        <input type="text" name="number" id="numberplate" readonly value="KCD 452K">
        <input type="text" name="driver" id="driver" readonly value="Mr. Edgar Obare">
        <div class="seats">
            <select name="row" id="seatrow" selected="default" required>
                <option value="default">Row</option>
                <option value="s1">1</option>
                <option value="s2">2</option>
                <option value="s3">3</option>
                <option value="s4">4</option>
                <option value="s5">5</option>
                <option value="s6">6</option>
                <option value="s7">7</option>
                <option value="s8">8</option>
            </select>
            <select name="col" id="seatcol" selected="default" required>
                <option value="default">Column</option>
                <option value="sa">a</option>
                <option value="sb">b</option>
                <option value="sc">c</option>
                <option value="sd">d</option>
            </select>
        </div>
        <button type="submit">Confirm Ride</button>
    </form>
    <form id="profile" class="profile">
        <h2>Account Details</h2>
        <h3>Profile Photo</h3>
        <img src="Images/Login-image.png" alt="profile">
        <h3>Username</h3>
        <input type="text" placeholder="Ronald Levis" id="username">
        <h3>Email</h3>
        <input type="email" placeholder="1042452@cuea.edu" id="email" name="email">
        <h3>Password</h3>
        <input type="text" name="password" id="password" placeholder="**********">
        <button type="submit">UPDATE</button>
    </form>
    <div id="history" class="history">
        <h2>Booking History</h2>
        <div class="day">
            <h3>13/12/2023</h3>
            <table>
                <tr>
                    <th>Route</th>
                    <th>Time</th>
                    <th>Vehicle</th>
                    <th>Driver</th>
                    <th>Seat</th>
                </tr>
                <tr>
                    <td>Rongai</td>
                    <td>11.30 am</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>1a</td>
                </tr>
                <tr>
                    <td>CBD</td>
                    <td>2.30 pm</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>2b</td>
                </tr>
            </table>
        </div>
        <div class="day">
            <h3>13/12/2023</h3>
            <table>
                <tr>
                    <th>Route</th>
                    <th>Time</th>
                    <th>Vehicle</th>
                    <th>Driver</th>
                    <th>Seat</th>
                </tr>
                <tr>
                    <td>Rongai</td>
                    <td>11.30 am</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>1a</td>
                </tr>
                <tr>
                    <td>CBD</td>
                    <td>2.30 pm</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>2b</td>
                </tr>
            </table>
        </div>
        <div class="day">
            <h3>13/12/2023</h3>
            <table>
                <tr>
                    <th>Route</th>
                    <th>Time</th>
                    <th>Vehicle</th>
                    <th>Driver</th>
                    <th>Seat</th>
                </tr>
                <tr>
                    <td>Rongai</td>
                    <td>11.30 am</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>1a</td>
                </tr>
                <tr>
                    <td>CBD</td>
                    <td>2.30 pm</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>2b</td>
                </tr>
            </table>
        </div>
        <div class="day">
            <h3>13/12/2023</h3>
            <table>
                <tr>
                    <th>Route</th>
                    <th>Time</th>
                    <th>Vehicle</th>
                    <th>Driver</th>
                    <th>Seat</th>
                </tr>
                <tr>
                    <td>Rongai</td>
                    <td>11.30 am</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>1a</td>
                </tr>
                <tr>
                    <td>CBD</td>
                    <td>2.30 pm</td>
                    <td>Scania F250</td>
                    <td>Mr. Edgar Obare</td>
                    <td>2b</td>
                </tr>
            </table>
        </div>
        <button>Download</button>
    </div>
    <form id="report" class="report">
        <h2>Give Feedback</h2>
        <h2>What is your experience using Emat?</h2>
        <div class="faces">
            <span class="material-symbols-outlined">sentiment_very_dissatisfied</span>
            <span class="material-symbols-outlined">sentiment_dissatisfied</span>
            <span class="material-symbols-outlined">sentiment_neutral</span>
            <span class="material-symbols-outlined">sentiment_satisfied</span>
            <span class="material-symbols-outlined">sentiment_very_satisfied</span>
        </div>
        <h2>What are the reasons for your feedback?</h2>
        <textarea name="feedback" id="feedback" cols="30" rows="10"></textarea>
        <div class="consent">
            <input type="checkbox" value="consent">
            <label for="consent">I consent to the use of my feedback for improvement purposes</label>
        </div>
        <div class="buttons">
            <button type="submit">Submit Feedback</button>
            <button type="reset">Cancel</button>
        </div>
    </form>
    <div id="settings" class="settings">
        <h1>Confirm Log Out</h1>
        <p>Are you sure you want to log out?</p>
        <button>Log Out</button>
    </div>
    <div class="map-display" id="map"></div>
</body>
<script>
    var map = L.map('map').setView([-1.2921, 36.8219], 16);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    var marker;
    
    navigator.geolocation.watchPosition(function(position) {
        var lat = position.coords.latitude;
        var long = position.coords.longitude;
        
        if (!marker) {
            marker = L.marker([lat, long]).addTo(map);
        } else {
            marker.setLatLng([lat, long]);
        }
        
        map.panTo(new L.LatLng(lat, long));
    }, function(error) {
        if (error.code === 1) {
            alert("Please allow location access!");
        } else {
            alert("Cannot get current location!");
        }
    });

    function expandControls() {
        var route = document.getElementById('route').value;
        var time = document.getElementById('time').value;
        if (route !== 'default-route' && time !== 'default-time') {
            var destination;
            switch (route) {
                case 'Ngong':
                    destination = L.latLng(-1.3567, 36.6561);
                    break;
                case 'CBD':
                    destination = L.latLng(-1.286389, 36.817223);
                    break;
                case 'Rongai':
                    destination = L.latLng(-1.3943, 36.7628);
                    break;
                case 'Karen':
                    destination = L.latLng(-1.3268, 36.7022);
                    break;
                default:
                    alert('Route not implemented yet!');
                    return;
            }

            var control = L.Routing.control({
                routeWhileDragging: true,
                show: false,
                createMarker: function() {
                    return null;
                }
            }).addTo(map);
        
            navigator.geolocation.watchPosition(function(position) {
                var lat = position.coords.latitude;
                var long = position.coords.longitude;
            
                control.setWaypoints([
                    L.latLng(lat, long),
                    destination
                ]);
            });
        }
        else {
            document.querySelector('route').style.color = 'red';
            document.querySelector('time').style.color = 'red';
        }
    }
    document.getElementById('time').addEventListener('change', expandControls);
    document.getElementById('route').addEventListener('change', expandControls);


    function changeTabs(tab){
        var hometab = document.getElementById('home');
        var profiletab = document.getElementById('profile');
        var histtab = document.getElementById('history');
        var reporttab = document.getElementById('report');
        var settab = document.getElementById('settings');
        if(tab === 'home'){
            if(hometab.style.display === "flex"){
                hometab.style.display = "none";
                document.getElementById("homeicon").style.backgroundColor = "transparent";
            }else{
                profiletab.style.display = "none";
                histtab.style.display = "none";
                reporttab.style.display = "none";
                settab.style.display = "none";
                hometab.style.display = "flex";
                document.getElementById("homeicon").style.backgroundColor = "#222831";
                document.getElementById("settingsicon").style.backgroundColor = "transparent";
                document.getElementById("reporticon").style.backgroundColor = "transparent";
                document.getElementById("profileicon").style.backgroundColor = "transparent";
                document.getElementById("historyicon").style.backgroundColor = "transparent";
            }
        }
        else if(tab === 'profile'){
            if(profiletab.style.display === "flex"){
                profiletab.style.display = "none";
                document.getElementById("profileicon").style.backgroundColor = "transparent";
            }else{
                histtab.style.display = "none";
                reporttab.style.display = "none";
                settab.style.display = "none";
                hometab.style.display = "none";
                profiletab.style.display = "flex";
                document.getElementById("profileicon").style.backgroundColor = "#222831";
                document.getElementById("settingsicon").style.backgroundColor = "transparent";
                document.getElementById("reporticon").style.backgroundColor = "transparent";
                document.getElementById("historyicon").style.backgroundColor = "transparent";
                document.getElementById("homeicon").style.backgroundColor = "transparent";
            }
        }
        else if(tab === 'history'){
            if(histtab.style.display === "flex"){
                histtab.style.display = "none";
                document.getElementById("historyicon").style.backgroundColor = "transparent";
            }else{
                profiletab.style.display = "none";
                reporttab.style.display = "none";
                settab.style.display = "none";
                hometab.style.display = "none";
                histtab.style.display = "flex";
                document.getElementById("historyicon").style.backgroundColor = "#222831";
                document.getElementById("settingsicon").style.backgroundColor = "transparent";
                document.getElementById("reporticon").style.backgroundColor = "transparent";
                document.getElementById("homeicon").style.backgroundColor = "transparent";
                document.getElementById("profileicon").style.backgroundColor = "transparent";
            }
        }
        else if(tab === 'report'){
            if(reporttab.style.display === "flex"){
                reporttab.style.display = "none";
                document.getElementById("reporticon").style.backgroundColor = "transparent";
            }else{
                profiletab.style.display = "none";
                histtab.style.display = "none";
                settab.style.display = "none";
                hometab.style.display = "none";
                reporttab.style.display = "flex";
                document.getElementById("reporticon").style.backgroundColor = "#222831";
                document.getElementById("settingsicon").style.backgroundColor = "transparent";
                document.getElementById("historyicon").style.backgroundColor = "transparent";
                document.getElementById("homeicon").style.backgroundColor = "transparent";
                document.getElementById("profileicon").style.backgroundColor = "transparent";
            }
        }
        else if(tab === 'settings'){
            if(settab.style.display === "flex"){
                settab.style.display = "none";
                document.getElementById("settingsicon").style.backgroundColor = "transparent";
            }else{
                profiletab.style.display = "none";
                histtab.style.display = "none";
                reporttab.style.display = "none";
                hometab.style.display = "none";
                settab.style.display = "flex";
                document.getElementById("settingsicon").style.backgroundColor = "#222831";
                document.getElementById("reporticon").style.backgroundColor = "transparent";
                document.getElementById("historyicon").style.backgroundColor = "transparent";
                document.getElementById("homeicon").style.backgroundColor = "transparent";
                document.getElementById("profileicon").style.backgroundColor = "transparent";
            }
        }
    }
</script>
</html>
